<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greaseweazle</title>
</head>
<body>
<main>
    <section>
        <p>2024-08-19</p>
        <h1>Greaseweazle</h1>
        <p>
            Ein Greaseweazle ist ein Open-Source Hardware- und Softwareprojekt zum Lesen und Schreiben von Disketten.
            Es wird über USB angeschlossen und kann verschiedene Diskettenformate verarbeiten.<br><br>
            Die Software ist in Python geschrieben und kann auf verschiedenen Betriebssystemen verwendet werden.
            <br><br>
        </p>
    </section>
    <section>
        <h2>Installation in eigener VENV</h2>
        <br>
        <p class="code-topic">Software installieren</p>
        <pre><code>$ python -m venv $HOME/greaseweazle/venv
$ source $HOME/greaseweazle/venv/bin/activate
$ pip install git+https://github.com/keirf/greaseweazle@latest
</code></pre>
        <br>
    </section>
    <section>
        <p>Um das nun installierte <strong><em>gw</em></strong> zu verwenden, muss die Umgebung aktiv sein. Um sie später zu aktivieren.</p>
        <br>
        <p class="code-topic">Venv aktivieren</p>
        <pre><code>$ source $HOME/greaseweazle/bin/activate
        </code></pre>
        <br>
    </section>
    <section>
        <p>
            Man kann ein Skript verwenden, speichern als: <strong><em>$HOME/bin/weazle.sh</em></strong>.
            Das öffnet eine neue Shell mit der aktiven Umgebung in einem Verzeichnis zum Speichern von Images.
        </p>
        <br>
        <p class="code-topic">$HOME/bin/weazle.sh</p>
        <pre><code>#!/bin/env bash

[ ! -d $HOME/greaseweazle/images ] && mkdir -p $HOME/greaseweazle/images
cd $HOME/greaseweazle/images

bash --init-file &lt;(echo "source $HOME/greaseweazle/venv/bin/activate ; gw reset ; gw info")
</code></pre>
        <br>
    </section>
    <section>
        <h2>Greaseweazle testen</h2>
        <p>Gerät über USB anschliessen. Es sollte als <strong><em>/dev/ttyACM0</em></strong> auftauchen.</p>
        <br>
        <p class="code-topic">gw info mit Ausgabe</p>
        <pre><code>$ gw info
Host Tools: 1.16
Device:
Port:     /dev/ttyACM0
Model:    Greaseweazle V4
MCU:      AT32F403, 144MHz, 96kB SRAM
Firmware: 1.4
Serial:   GW135194F042054000026C9705
USB:      Full Speed (12 Mbit/s)
</code></pre>
        <br>
    </section>
    <section>
        <h2>Greaseweazle verwenden</h2>
        <h3>Eine Diskette lesen</h3>
        <p>Um mehr Informationen über mögliche Leseformate und Ausgaben zu erhalten, verwendet man <strong><em>gw read --help</em></strong></p>
        <br>
        <p class="code-topic">Lesen einer MS-DOS 1,44MB HD 3,5" Diskette</p>
        <pre><code>$ gw read --format ibm.1440 a.scp
Reading c=0-79:h=0-1 revs=2
Format ibm.1440
T0.0: IBM MFM (18/18 sectors) from Raw Flux (172457 flux in 399.82ms)
T0.1: IBM MFM (18/18 sectors) from Raw Flux (181444 flux in 399.78ms)
T1.0: IBM MFM (18/18 sectors) from Raw Flux (154986 flux in 399.83ms)
T1.1: IBM MFM (18/18 sectors) from Raw Flux (154716 flux in 399.76ms)
T2.0: IBM MFM (18/18 sectors) from Raw Flux (151418 flux in 399.75ms)
...
</code></pre>
        <br>
    </section>
    <section>
        <h3>Eine Diskette schreiben</h3>
        <p>Details zum Schreiben einer Diskette...</p>
        <br>
    </section>
    <section>
        <h3>Zusätzliches</h3>
        <p>Details zur zusätzlichen Nutzung...</p>
        <br>
    </section>
</main>
</body>
</html>